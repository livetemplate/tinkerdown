<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Exec Toolbar Mockup - Livemdtools Runbook Feature</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #0d1117;
      color: #e5e7eb;
      padding: 2rem;
      max-width: 800px;
      margin: 0 auto;
    }
    h1 { color: #f8fafc; margin-bottom: 0.5rem; }
    h2 { color: #9ca3af; font-size: 1rem; margin-bottom: 1.5rem; font-weight: normal; }
    .block-container { margin-bottom: 2rem; }
    .label { color: #6b7280; font-size: 0.75rem; margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.05em; }

    /* Exec Toolbar Styles */
    .exec-toolbar {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.5rem 0.75rem;
      background: #1e1e1e;
      border: 1px solid #333;
      border-radius: 6px 6px 0 0;
      font-family: 'SF Mono', 'Consolas', 'Monaco', monospace;
      font-size: 0.875rem;
    }
    .exec-toolbar-command { flex: 1; color: #9ca3af; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    .exec-toolbar-command code { color: #e5e7eb; background: transparent; }
    .exec-toolbar-run-btn {
      display: flex;
      align-items: center;
      gap: 0.375rem;
      padding: 0.375rem 0.75rem;
      background: #22c55e;
      border: none;
      border-radius: 4px;
      color: white;
      font-weight: 500;
      font-size: 0.8125rem;
      cursor: pointer;
      transition: background 0.2s;
    }
    .exec-toolbar-run-btn:hover:not(:disabled) { background: #16a34a; }
    .exec-toolbar-run-btn:disabled { opacity: 0.5; cursor: not-allowed; }
    .exec-toolbar-run-btn.running { background: #f59e0b; }
    .exec-toolbar-status { display: flex; align-items: center; gap: 0.375rem; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 500; }
    .exec-toolbar-status.idle { color: #9ca3af; }
    .exec-toolbar-status.running { color: #f59e0b; }
    .exec-toolbar-status.success { color: #22c55e; }
    .exec-toolbar-status.error { color: #ef4444; }
    .exec-toolbar-duration { color: #6b7280; font-size: 0.75rem; }
    .exec-spinner {
      width: 14px; height: 14px;
      border: 2px solid currentColor;
      border-top-color: transparent;
      border-radius: 50%;
      animation: exec-spin 0.8s linear infinite;
    }
    @keyframes exec-spin { to { transform: rotate(360deg); } }

    /* Output Panel */
    .exec-output-panel {
      background: #0d1117;
      border: 1px solid #333;
      border-top: none;
      overflow: hidden;
    }
    .exec-output-toggle {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 0.75rem;
      width: 100%;
      background: transparent;
      border: none;
      color: #9ca3af;
      font-size: 0.75rem;
      cursor: pointer;
      text-align: left;
      font-family: inherit;
    }
    .exec-output-toggle:hover { background: rgba(255, 255, 255, 0.05); }
    .exec-output-toggle-icon { transition: transform 0.2s; }
    .exec-output-toggle.expanded .exec-output-toggle-icon { transform: rotate(90deg); }
    .exec-output-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }
    .exec-output-content.expanded { max-height: 400px; overflow-y: auto; }
    .exec-output-pre {
      margin: 0;
      padding: 0.75rem;
      font-family: 'SF Mono', 'Consolas', 'Monaco', monospace;
      font-size: 0.8125rem;
      line-height: 1.5;
      white-space: pre-wrap;
      word-break: break-all;
    }
    .exec-output-stdout { color: #e5e7eb; }
    .exec-output-stderr { color: #f87171; border-top: 1px solid #333; }

    /* Content area */
    .exec-content {
      background: #161b22;
      border: 1px solid #333;
      border-top: none;
      border-radius: 0 0 6px 6px;
      padding: 1rem;
    }
    .exec-content table { width: 100%; border-collapse: collapse; }
    .exec-content th, .exec-content td { padding: 0.5rem; text-align: left; border-bottom: 1px solid #333; }
    .exec-content th { color: #9ca3af; font-weight: 500; font-size: 0.875rem; }
    .exec-content td { font-size: 0.875rem; }
    .placeholder { color: #6b7280; font-style: italic; }

    hr { border: none; border-top: 1px solid #333; margin: 3rem 0; }
  </style>
</head>
<body>
  <h1>Exec Toolbar Mockup</h1>
  <h2>Runbook/Notebook-style command execution for livemdtools</h2>

  <!-- State: Idle (Manual Mode) -->
  <div class="block-container">
    <div class="label">State: Idle (manual mode - waiting for user to click Run)</div>
    <div class="exec-toolbar">
      <div class="exec-toolbar-command"><code>./deploy.sh --env production</code></div>
      <div class="exec-toolbar-status idle"><span>Ready</span></div>
      <span class="exec-toolbar-duration"></span>
      <button class="exec-toolbar-run-btn" type="button">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
        Run
      </button>
    </div>
    <div class="exec-output-panel">
      <button class="exec-output-toggle" type="button">
        <svg class="exec-output-toggle-icon" width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>
        Output
      </button>
      <div class="exec-output-content"></div>
    </div>
    <div class="exec-content">
      <p class="placeholder">Click Run to execute the deployment script</p>
    </div>
  </div>

  <hr>

  <!-- State: Running -->
  <div class="block-container">
    <div class="label">State: Running (command executing)</div>
    <div class="exec-toolbar">
      <div class="exec-toolbar-command"><code>kubectl get pods -n production</code></div>
      <div class="exec-toolbar-status running"><span class="exec-spinner"></span></div>
      <span class="exec-toolbar-duration"></span>
      <button class="exec-toolbar-run-btn running" type="button" disabled>
        <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
        Running...
      </button>
    </div>
    <div class="exec-output-panel">
      <button class="exec-output-toggle" type="button">
        <svg class="exec-output-toggle-icon" width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>
        Output
      </button>
      <div class="exec-output-content"></div>
    </div>
    <div class="exec-content">
      <p class="placeholder">Fetching pod status...</p>
    </div>
  </div>

  <hr>

  <!-- State: Success (with output expanded) -->
  <div class="block-container">
    <div class="label">State: Success (output panel expanded)</div>
    <div class="exec-toolbar">
      <div class="exec-toolbar-command"><code>./get-users.sh</code></div>
      <div class="exec-toolbar-status success"><span>✓ Success</span></div>
      <span class="exec-toolbar-duration">145ms</span>
      <button class="exec-toolbar-run-btn" type="button">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
        Run
      </button>
    </div>
    <div class="exec-output-panel">
      <button class="exec-output-toggle expanded" type="button">
        <svg class="exec-output-toggle-icon" width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>
        Output
      </button>
      <div class="exec-output-content expanded">
        <pre class="exec-output-pre exec-output-stdout">[
  {"id": 1, "name": "Alice", "email": "alice@example.com", "role": "admin"},
  {"id": 2, "name": "Bob", "email": "bob@example.com", "role": "user"},
  {"id": 3, "name": "Charlie", "email": "charlie@example.com", "role": "user"}
]</pre>
      </div>
    </div>
    <div class="exec-content">
      <table>
        <thead><tr><th>ID</th><th>Name</th><th>Email</th><th>Role</th></tr></thead>
        <tbody>
          <tr><td>1</td><td>Alice</td><td>alice@example.com</td><td>admin</td></tr>
          <tr><td>2</td><td>Bob</td><td>bob@example.com</td><td>user</td></tr>
          <tr><td>3</td><td>Charlie</td><td>charlie@example.com</td><td>user</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <hr>

  <!-- State: Error (with stderr) -->
  <div class="block-container">
    <div class="label">State: Error (showing stderr in red)</div>
    <div class="exec-toolbar">
      <div class="exec-toolbar-command"><code>./backup-database.sh</code></div>
      <div class="exec-toolbar-status error"><span>✗ Error</span></div>
      <span class="exec-toolbar-duration">2341ms</span>
      <button class="exec-toolbar-run-btn" type="button">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
        Run
      </button>
    </div>
    <div class="exec-output-panel">
      <button class="exec-output-toggle expanded" type="button">
        <svg class="exec-output-toggle-icon" width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>
        Output
      </button>
      <div class="exec-output-content expanded">
        <pre class="exec-output-pre exec-output-stdout">Starting backup...
Connecting to database...</pre>
        <pre class="exec-output-pre exec-output-stderr">ERROR: Connection refused
Could not connect to database server at localhost:5432
Is the server running and accepting connections?</pre>
      </div>
    </div>
    <div class="exec-content">
      <p style="color: #ef4444;">⚠ Backup failed: Connection refused</p>
    </div>
  </div>

  <hr>

  <!-- Compact view - output collapsed -->
  <div class="block-container">
    <div class="label">Compact view (output collapsed, auto-execute mode)</div>
    <div class="exec-toolbar">
      <div class="exec-toolbar-command"><code>uname -a</code></div>
      <div class="exec-toolbar-status success"><span>✓ Success</span></div>
      <span class="exec-toolbar-duration">12ms</span>
      <button class="exec-toolbar-run-btn" type="button">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
        Run
      </button>
    </div>
    <div class="exec-output-panel">
      <button class="exec-output-toggle" type="button">
        <svg class="exec-output-toggle-icon" width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>
        Output
      </button>
      <div class="exec-output-content">
        <pre class="exec-output-pre exec-output-stdout">Darwin MacBook-Pro.local 24.5.0 Darwin Kernel Version 24.5.0</pre>
      </div>
    </div>
    <div class="exec-content">
      <pre style="margin: 0; color: #9ca3af;">Darwin MacBook-Pro.local 24.5.0 Darwin Kernel Version 24.5.0</pre>
    </div>
  </div>

  <script>
    // Toggle output panels on click
    document.querySelectorAll('.exec-output-toggle').forEach(btn => {
      btn.addEventListener('click', () => {
        btn.classList.toggle('expanded');
        btn.nextElementSibling.classList.toggle('expanded');
      });
    });

    // Simulate run button clicks
    document.querySelectorAll('.exec-toolbar-run-btn:not(:disabled)').forEach(btn => {
      btn.addEventListener('click', () => {
        const toolbar = btn.closest('.exec-toolbar');
        const status = toolbar.querySelector('.exec-toolbar-status');

        // Show running state
        btn.disabled = true;
        btn.classList.add('running');
        btn.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg> Running...';
        status.className = 'exec-toolbar-status running';
        status.innerHTML = '<span class="exec-spinner"></span>';

        // After 1.5s, show success
        setTimeout(() => {
          btn.disabled = false;
          btn.classList.remove('running');
          btn.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg> Run';
          status.className = 'exec-toolbar-status success';
          status.innerHTML = '<span>✓ Success</span>';

          const duration = toolbar.querySelector('.exec-toolbar-duration');
          duration.textContent = Math.floor(Math.random() * 200 + 50) + 'ms';
        }, 1500);
      });
    });
  </script>
</body>
</html>
