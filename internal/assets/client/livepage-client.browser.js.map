{
  "version": 3,
  "sources": ["../src/browser.ts", "../src/core/message-router.ts", "../src/core/persistence-manager.ts", "../src/blocks/base-block.ts", "../src/blocks/server-block.ts", "../src/blocks/interactive-block.ts", "../src/editor/monaco-loader.ts", "../src/editor/monaco-editor.ts", "../src/ui/output-panel.ts", "../src/ui/run-button.ts", "../src/wasm/tinygo-executor.ts", "../src/blocks/wasm-block.ts", "../src/livepage-client.ts", "../src/core/navigation.ts", "../src/core/search.ts", "../src/core/code-copy.ts", "../src/core/page-toc.ts", "../src/auto-init.ts"],
  "sourcesContent": ["/**\n * Browser entry point with auto-initialization\n */\n\n// Export everything from index\nexport * from \"./index\";\n\n// Import auto-init (triggers on load)\nimport \"./auto-init\";\n", "/**\n * MessageRouter - Multiplexes WebSocket messages by blockID\n */\n\nimport { MessageEnvelope } from \"../types\";\n\nexport type MessageHandler = (action: string, data: any) => void;\n\nexport class MessageRouter {\n  private handlers: Map<string, MessageHandler> = new Map();\n  private debug: boolean;\n\n  constructor(debug = false) {\n    this.debug = debug;\n  }\n\n  /**\n   * Register a handler for a specific block ID\n   */\n  register(blockID: string, handler: MessageHandler): void {\n    if (this.handlers.has(blockID)) {\n      console.warn(`[MessageRouter] Overwriting handler for block: ${blockID}`);\n    }\n    this.handlers.set(blockID, handler);\n    if (this.debug) {\n      console.log(`[MessageRouter] Registered handler for block: ${blockID}`);\n    }\n  }\n\n  /**\n   * Unregister a handler for a specific block ID\n   */\n  unregister(blockID: string): void {\n    this.handlers.delete(blockID);\n    if (this.debug) {\n      console.log(`[MessageRouter] Unregistered handler for block: ${blockID}`);\n    }\n  }\n\n  /**\n   * Route an incoming message to the appropriate handler\n   */\n  route(message: string | MessageEnvelope): void {\n    try {\n      const envelope: MessageEnvelope =\n        typeof message === \"string\" ? JSON.parse(message) : message;\n\n      const { blockID, action, data } = envelope;\n\n      // Handle reload action (special case - no blockID)\n      if (action === \"reload\") {\n        this.handleReload(data?.filePath || \"\");\n        return;\n      }\n\n      if (!blockID) {\n        console.error(\"[MessageRouter] Message missing blockID:\", envelope);\n        return;\n      }\n\n      const handler = this.handlers.get(blockID);\n      if (!handler) {\n        console.warn(`[MessageRouter] No handler for block: ${blockID}`);\n        return;\n      }\n\n      if (this.debug) {\n        console.log(`[MessageRouter] Routing to ${blockID}:`, { action, data });\n      }\n\n      handler(action, data);\n    } catch (error) {\n      console.error(\"[MessageRouter] Error routing message:\", error);\n    }\n  }\n\n  /**\n   * Handle reload message from server\n   */\n  private handleReload(filePath: string): void {\n    console.log(`[MessageRouter] Page reloading: ${filePath} changed`);\n\n    // Show notification\n    this.showReloadNotification(filePath);\n\n    // Reload the page after a short delay to show the notification\n    setTimeout(() => {\n      window.location.reload();\n    }, 500);\n  }\n\n  /**\n   * Show reload notification overlay\n   */\n  private showReloadNotification(filePath: string): void {\n    const existing = document.getElementById(\"livepage-reload-notification\");\n    if (existing) {\n      existing.remove();\n    }\n\n    const notification = document.createElement(\"div\");\n    notification.id = \"livepage-reload-notification\";\n    notification.innerHTML = `\n      <div style=\"\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n        color: white;\n        padding: 16px 20px;\n        border-radius: 8px;\n        box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n        z-index: 100000;\n        font-family: system-ui, -apple-system, sans-serif;\n        font-size: 14px;\n        animation: slideIn 0.3s ease-out;\n      \">\n        <div style=\"display: flex; align-items: center; gap: 10px;\">\n          <div style=\"font-size: 20px;\">\uD83D\uDD04</div>\n          <div>\n            <div style=\"font-weight: 600;\">File Updated</div>\n            <div style=\"opacity: 0.9; font-size: 12px; margin-top: 2px;\">${filePath}</div>\n          </div>\n        </div>\n      </div>\n    `;\n\n    // Add animation\n    const style = document.createElement(\"style\");\n    style.textContent = `\n      @keyframes slideIn {\n        from {\n          transform: translateX(400px);\n          opacity: 0;\n        }\n        to {\n          transform: translateX(0);\n          opacity: 1;\n        }\n      }\n    `;\n    document.head.appendChild(style);\n    document.body.appendChild(notification);\n  }\n\n  /**\n   * Send a message to the server (formatted as envelope)\n   */\n  createEnvelope(blockID: string, action: string, data: any = {}): MessageEnvelope {\n    return { blockID, action, data };\n  }\n\n  /**\n   * Get all registered block IDs\n   */\n  getRegisteredBlocks(): string[] {\n    return Array.from(this.handlers.keys());\n  }\n\n  /**\n   * Clear all handlers\n   */\n  clear(): void {\n    this.handlers.clear();\n    if (this.debug) {\n      console.log(\"[MessageRouter] Cleared all handlers\");\n    }\n  }\n}\n", "/**\n * PersistenceManager - Handles localStorage for code edits and state\n */\n\nimport { PersistenceData } from \"../types\";\n\nexport class PersistenceManager {\n  private storageKey: string;\n  private enabled: boolean;\n  private debug: boolean;\n\n  constructor(storageKey = \"livepage:persistence\", enabled = true, debug = false) {\n    this.storageKey = storageKey;\n    this.enabled = enabled && this.isLocalStorageAvailable();\n    this.debug = debug;\n\n    if (!this.enabled && enabled) {\n      console.warn(\"[PersistenceManager] localStorage not available, persistence disabled\");\n    }\n  }\n\n  /**\n   * Check if localStorage is available\n   */\n  private isLocalStorageAvailable(): boolean {\n    try {\n      const test = \"__localStorage_test__\";\n      localStorage.setItem(test, test);\n      localStorage.removeItem(test);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  /**\n   * Save code for a specific block\n   */\n  saveCode(blockID: string, code: string): void {\n    if (!this.enabled) return;\n\n    try {\n      const data = this.loadAll();\n      data.code[blockID] = code;\n      data.timestamp = Date.now();\n\n      localStorage.setItem(this.storageKey, JSON.stringify(data));\n\n      if (this.debug) {\n        console.log(`[PersistenceManager] Saved code for block: ${blockID}`);\n      }\n    } catch (error) {\n      console.error(\"[PersistenceManager] Error saving code:\", error);\n    }\n  }\n\n  /**\n   * Load code for a specific block\n   */\n  loadCode(blockID: string): string | null {\n    if (!this.enabled) return null;\n\n    try {\n      const data = this.loadAll();\n      return data.code[blockID] || null;\n    } catch (error) {\n      console.error(\"[PersistenceManager] Error loading code:\", error);\n      return null;\n    }\n  }\n\n  /**\n   * Load all persisted data\n   */\n  loadAll(): PersistenceData {\n    if (!this.enabled) {\n      return { code: {}, timestamp: Date.now() };\n    }\n\n    try {\n      const raw = localStorage.getItem(this.storageKey);\n      if (!raw) {\n        return { code: {}, timestamp: Date.now() };\n      }\n\n      const data = JSON.parse(raw) as PersistenceData;\n\n      // Validate structure\n      if (!data.code || typeof data.code !== \"object\") {\n        console.warn(\"[PersistenceManager] Invalid data structure, resetting\");\n        return { code: {}, timestamp: Date.now() };\n      }\n\n      return data;\n    } catch (error) {\n      console.error(\"[PersistenceManager] Error loading data:\", error);\n      return { code: {}, timestamp: Date.now() };\n    }\n  }\n\n  /**\n   * Clear code for a specific block\n   */\n  clearCode(blockID: string): void {\n    if (!this.enabled) return;\n\n    try {\n      const data = this.loadAll();\n      delete data.code[blockID];\n      data.timestamp = Date.now();\n\n      localStorage.setItem(this.storageKey, JSON.stringify(data));\n\n      if (this.debug) {\n        console.log(`[PersistenceManager] Cleared code for block: ${blockID}`);\n      }\n    } catch (error) {\n      console.error(\"[PersistenceManager] Error clearing code:\", error);\n    }\n  }\n\n  /**\n   * Clear all persisted data\n   */\n  clearAll(): void {\n    if (!this.enabled) return;\n\n    try {\n      localStorage.removeItem(this.storageKey);\n\n      if (this.debug) {\n        console.log(\"[PersistenceManager] Cleared all persisted data\");\n      }\n    } catch (error) {\n      console.error(\"[PersistenceManager] Error clearing all data:\", error);\n    }\n  }\n\n  /**\n   * Get all persisted block IDs\n   */\n  getPersistedBlocks(): string[] {\n    if (!this.enabled) return [];\n\n    const data = this.loadAll();\n    return Object.keys(data.code);\n  }\n\n  /**\n   * Check if a block has persisted code\n   */\n  hasPersistedCode(blockID: string): boolean {\n    if (!this.enabled) return false;\n\n    const data = this.loadAll();\n    return blockID in data.code;\n  }\n\n  /**\n   * Get the timestamp of last persistence update\n   */\n  getLastUpdate(): number | null {\n    if (!this.enabled) return null;\n\n    const data = this.loadAll();\n    return data.timestamp;\n  }\n}\n", "/**\n * BaseBlock - Abstract base class for all code blocks\n */\n\nimport { BlockConfig, BlockMetadata } from \"../types\";\nimport { PersistenceManager } from \"../core/persistence-manager\";\n\nexport abstract class BaseBlock {\n  protected element: HTMLElement;\n  protected metadata: BlockMetadata;\n  protected persistence: PersistenceManager;\n  protected initialCode: string;\n  protected currentCode: string;\n  protected debug: boolean;\n\n  constructor(config: BlockConfig, persistence: PersistenceManager, debug = false) {\n    this.element = config.element;\n    this.metadata = config.metadata;\n    this.persistence = persistence;\n    this.initialCode = config.initialCode || \"\";\n    this.currentCode = this.initialCode;\n    this.debug = debug;\n  }\n\n  /**\n   * Initialize the block (called by LivepageClient)\n   */\n  abstract initialize(): void;\n\n  /**\n   * Destroy the block and clean up resources\n   */\n  abstract destroy(): void;\n\n  /**\n   * Handle incoming messages from the server\n   */\n  abstract handleMessage(action: string, data: any): void;\n\n  /**\n   * Get the block ID\n   */\n  get id(): string {\n    return this.metadata.id;\n  }\n\n  /**\n   * Get the block type\n   */\n  get type(): string {\n    return this.metadata.type;\n  }\n\n  /**\n   * Get current code content\n   */\n  getCode(): string {\n    return this.currentCode;\n  }\n\n  /**\n   * Set code content\n   */\n  setCode(code: string): void {\n    this.currentCode = code;\n    if (this.metadata.editable) {\n      this.persistence.saveCode(this.id, code);\n    }\n  }\n\n  /**\n   * Reset to initial code\n   */\n  reset(): void {\n    this.setCode(this.initialCode);\n    if (this.debug) {\n      console.log(`[Block:${this.id}] Reset to initial code`);\n    }\n  }\n\n  /**\n   * Load persisted code if available\n   */\n  protected loadPersistedCode(): string {\n    if (!this.metadata.editable) {\n      return this.initialCode;\n    }\n\n    const persisted = this.persistence.loadCode(this.id);\n    if (persisted) {\n      if (this.debug) {\n        console.log(`[Block:${this.id}] Loaded persisted code`);\n      }\n      return persisted;\n    }\n\n    return this.initialCode;\n  }\n\n  /**\n   * Create wrapper HTML for the block\n   */\n  protected createBlockWrapper(): HTMLElement {\n    const wrapper = document.createElement(\"div\");\n    wrapper.className = `livepage-block livepage-block-${this.type}`;\n    wrapper.dataset.blockId = this.id;\n    wrapper.dataset.blockType = this.type;\n    return wrapper;\n  }\n\n  /**\n   * Log debug message\n   */\n  protected log(...args: any[]): void {\n    if (this.debug) {\n      console.log(`[Block:${this.id}]`, ...args);\n    }\n  }\n\n  /**\n   * Log error message\n   */\n  protected error(...args: any[]): void {\n    console.error(`[Block:${this.id}]`, ...args);\n  }\n}\n", "/**\n * ServerBlock - Displays server-side code (read-only)\n */\n\nimport { BaseBlock } from \"./base-block\";\nimport { BlockConfig } from \"../types\";\nimport { PersistenceManager } from \"../core/persistence-manager\";\n\nexport class ServerBlock extends BaseBlock {\n  private codeElement: HTMLElement | null = null;\n\n  constructor(config: BlockConfig, persistence: PersistenceManager, debug = false) {\n    super(config, persistence, debug);\n  }\n\n  initialize(): void {\n    this.log(\"Initializing server block\");\n\n    // Find or create code element\n    this.codeElement = this.element.querySelector(\"code\") || this.element;\n\n    // Add CSS classes for styling\n    this.element.classList.add(\"livepage-server-block\");\n    if (this.metadata.readonly) {\n      this.element.classList.add(\"readonly\");\n    }\n\n    // Add metadata as data attributes\n    this.element.dataset.blockId = this.id;\n    this.element.dataset.language = this.metadata.language;\n\n    // Display initial code\n    this.render();\n\n    this.log(\"Server block initialized\");\n  }\n\n  destroy(): void {\n    this.log(\"Destroying server block\");\n    // No cleanup needed for server blocks\n  }\n\n  handleMessage(action: string, data: any): void {\n    this.log(\"Received message:\", action, data);\n    // Server blocks don't handle messages (they're static)\n    console.warn(`[ServerBlock:${this.id}] Received unexpected message:`, action);\n  }\n\n  private render(): void {\n    if (!this.codeElement) return;\n\n    // Simply display the code (syntax highlighting handled by existing pre/code elements)\n    // The server already rendered this, we're just marking it as a livepage block\n    this.log(\"Rendered server block\");\n  }\n}\n", "/**\n * InteractiveBlock - Wraps a LiveTemplateClient instance for interactive UI\n */\n\nimport { LiveTemplateClient } from \"@livetemplate/client\";\nimport { BaseBlock } from \"./base-block\";\nimport { BlockConfig } from \"../types\";\nimport { PersistenceManager } from \"../core/persistence-manager\";\n\nexport class InteractiveBlock extends BaseBlock {\n  private client: LiveTemplateClient | null = null;\n  private containerElement: HTMLElement | null = null;\n  private sendMessage: ((blockID: string, action: string, data: any) => void) | null = null;\n\n  constructor(config: BlockConfig, persistence: PersistenceManager, debug = false) {\n    super(config, persistence, debug);\n  }\n\n  initialize(): void {\n    this.log(\"Initializing interactive block\");\n\n    // Find or create container for the interactive content\n    this.containerElement = this.element.querySelector(\"[data-interactive-content]\") || this.element;\n\n    // Add CSS classes\n    this.element.classList.add(\"livepage-interactive-block\");\n    this.element.dataset.blockId = this.id;\n    if (this.metadata.stateRef) {\n      this.element.dataset.stateRef = this.metadata.stateRef;\n    }\n\n    // Initialize LiveTemplateClient instance (without WebSocket - we handle that)\n    // TODO: Fix @livetemplate/client export issue\n    // For now, we handle DOM updates manually via updateDOM method\n    // this.client = new LiveTemplateClient({\n    //   autoReconnect: false,\n    //   onConnect: () => this.log(\"Client connected\"),\n    //   onDisconnect: () => this.log(\"Client disconnected\"),\n    //   onError: (error) => this.error(\"Client error:\", error),\n    // });\n\n    // Attach event handler to intercept lvt-* events\n    this.attachEventHandlers();\n\n    this.log(\"Interactive block initialized\");\n  }\n\n  destroy(): void {\n    this.log(\"Destroying interactive block\");\n    if (this.client) {\n      // Clean up the client instance\n      this.client = null;\n    }\n  }\n\n  handleMessage(action: string, data: any): void {\n    this.log(\"Received message:\", action, data);\n\n    switch (action) {\n      case \"tree\":\n        // Server sent a tree update - apply it to the DOM\n        if (data.tree && this.containerElement) {\n          this.updateDOM(data.tree);\n        }\n        break;\n\n      case \"update\":\n        // Server sent HTML update - replace container content\n        if (data.html && this.containerElement) {\n          this.containerElement.innerHTML = data.html;\n          this.log(\"DOM updated with HTML\");\n        }\n        break;\n\n      case \"error\":\n        this.error(\"Server error:\", data.message);\n        break;\n\n      default:\n        this.log(\"Unknown action:\", action);\n    }\n  }\n\n  /**\n   * Set the message sender (called by LivepageClient)\n   */\n  setMessageSender(sender: (blockID: string, action: string, data: any) => void): void {\n    this.sendMessage = sender;\n  }\n\n  /**\n   * Update DOM with tree from server\n   */\n  private updateDOM(tree: any): void {\n    if (!this.client || !this.containerElement) return;\n\n    try {\n      // Use the livetemplate client's tree renderer to update DOM\n      // We need to access the internal renderer - for now, update innerHTML\n      // TODO: Access TreeRenderer directly for optimized updates\n      if (tree.html) {\n        this.containerElement.innerHTML = tree.html;\n      }\n      this.log(\"DOM updated\");\n    } catch (error) {\n      this.error(\"Error updating DOM:\", error);\n    }\n  }\n\n  /**\n   * Attach event handlers for lvt-* attributes\n   */\n  private attachEventHandlers(): void {\n    if (!this.element) return;\n\n    // Delegate events to our custom handler\n    this.element.addEventListener(\"click\", (e) => this.handleClick(e), true);\n    this.element.addEventListener(\"submit\", (e) => this.handleSubmit(e), true);\n    this.element.addEventListener(\"change\", (e) => this.handleChange(e), true);\n  }\n\n  /**\n   * Handle click events (lvt-click)\n   */\n  private handleClick(e: Event): void {\n    const target = e.target as HTMLElement;\n    const action = target.getAttribute(\"lvt-click\");\n\n    if (action) {\n      e.preventDefault();\n      this.sendAction(action, {});\n      this.log(\"Click action:\", action);\n    }\n  }\n\n  /**\n   * Handle submit events (lvt-submit)\n   */\n  private handleSubmit(e: Event): void {\n    const target = e.target as HTMLFormElement;\n    const action = target.getAttribute(\"lvt-submit\");\n\n    if (action) {\n      e.preventDefault();\n      const formData = new FormData(target);\n      const data: Record<string, any> = {};\n      formData.forEach((value, key) => {\n        data[key] = value;\n      });\n      this.sendAction(action, data);\n      this.log(\"Submit action:\", action, data);\n    }\n  }\n\n  /**\n   * Handle change events (lvt-change)\n   */\n  private handleChange(e: Event): void {\n    const target = e.target as HTMLInputElement;\n    const action = target.getAttribute(\"lvt-change\");\n\n    if (action) {\n      const data = { value: target.value };\n      this.sendAction(action, data);\n      this.log(\"Change action:\", action, data);\n    }\n  }\n\n  /**\n   * Send an action to the server\n   */\n  private sendAction(action: string, data: any = {}): void {\n    if (!this.sendMessage) {\n      this.error(\"Cannot send action - no message sender configured\");\n      return;\n    }\n\n    this.sendMessage(this.id, action, data);\n  }\n}\n", "/**\n * Monaco Loader - Load Monaco Editor from CDN on demand\n * This eliminates Monaco from the bundle (~3MB reduction)\n */\n\nimport type * as monaco from \"monaco-editor\";\n\n// Monaco CDN configuration\nconst MONACO_VERSION = \"0.45.0\";\nconst MONACO_CDN_BASE = `https://cdn.jsdelivr.net/npm/monaco-editor@${MONACO_VERSION}/min`;\n\n// Singleton pattern - only load once\nlet monacoInstance: typeof monaco | null = null;\nlet loadingPromise: Promise<typeof monaco> | null = null;\n\n// Declare AMD loader types (avoid conflict with monaco's Window extension)\ninterface AMDRequire {\n  (deps: string[], callback: (...modules: any[]) => void): void;\n  config: (config: any) => void;\n}\n\ndeclare global {\n  interface Window {\n    require: AMDRequire | undefined;\n  }\n}\n\n/**\n * Load the Monaco AMD loader script from CDN\n */\nfunction loadMonacoLoader(): Promise<void> {\n  return new Promise((resolve, reject) => {\n    // Check if loader already exists\n    if (typeof window.require === \"function\") {\n      resolve();\n      return;\n    }\n\n    const script = document.createElement(\"script\");\n    script.src = `${MONACO_CDN_BASE}/vs/loader.js`;\n    script.async = true;\n    script.onload = () => resolve();\n    script.onerror = () => reject(new Error(\"Failed to load Monaco loader from CDN\"));\n    document.head.appendChild(script);\n  });\n}\n\n/**\n * Initialize Monaco environment for workers\n */\nfunction initializeMonacoEnvironment(): void {\n  window.MonacoEnvironment = {\n    getWorkerUrl: function (_moduleId: string, label: string) {\n      // Use CDN for workers\n      const workerMain = `${MONACO_CDN_BASE}/vs/base/worker/workerMain.js`;\n\n      // Return appropriate worker based on language\n      if (label === \"json\") {\n        return `${MONACO_CDN_BASE}/vs/language/json/json.worker.js`;\n      }\n      if (label === \"css\" || label === \"scss\" || label === \"less\") {\n        return `${MONACO_CDN_BASE}/vs/language/css/css.worker.js`;\n      }\n      if (label === \"html\" || label === \"handlebars\" || label === \"razor\") {\n        return `${MONACO_CDN_BASE}/vs/language/html/html.worker.js`;\n      }\n      if (label === \"typescript\" || label === \"javascript\") {\n        return `${MONACO_CDN_BASE}/vs/language/typescript/ts.worker.js`;\n      }\n\n      // Default editor worker\n      return workerMain;\n    },\n  };\n}\n\n/**\n * Lazy load Monaco Editor from CDN\n * @returns Promise that resolves to monaco-editor module\n */\nexport async function loadMonaco(): Promise<typeof monaco> {\n  // Return cached instance if already loaded\n  if (monacoInstance) {\n    return monacoInstance;\n  }\n\n  // Return existing promise if currently loading\n  if (loadingPromise) {\n    return loadingPromise;\n  }\n\n  console.log(\"[MonacoLoader] Loading Monaco Editor from CDN...\");\n  const startTime = performance.now();\n\n  loadingPromise = (async () => {\n    try {\n      // Step 1: Load the AMD loader\n      await loadMonacoLoader();\n\n      // Get the AMD require function\n      const amdRequire = window.require;\n      if (!amdRequire) {\n        throw new Error(\"AMD loader not available after loading\");\n      }\n\n      // Step 2: Configure AMD loader paths\n      amdRequire.config({\n        paths: {\n          vs: `${MONACO_CDN_BASE}/vs`,\n        },\n      });\n\n      // Step 3: Initialize environment before loading\n      initializeMonacoEnvironment();\n\n      // Step 4: Load Monaco editor module\n      return await new Promise<typeof monaco>((resolve, reject) => {\n        amdRequire([\"vs/editor/editor.main\"], (monacoModule: typeof monaco) => {\n          if (!monacoModule) {\n            reject(new Error(\"Monaco module loaded but is undefined\"));\n            return;\n          }\n\n          monacoInstance = monacoModule;\n          const loadTime = Math.round(performance.now() - startTime);\n          console.log(`[MonacoLoader] Monaco Editor loaded from CDN in ${loadTime}ms`);\n          resolve(monacoModule);\n        });\n      });\n    } catch (error) {\n      loadingPromise = null; // Reset on error so we can retry\n      throw error;\n    }\n  })();\n\n  return loadingPromise;\n}\n\n/**\n * Check if Monaco is already loaded\n */\nexport function isMonacoLoaded(): boolean {\n  return monacoInstance !== null;\n}\n\n/**\n * Preload Monaco in the background (optional optimization)\n * Call this early in page lifecycle if you know Monaco will be needed\n */\nexport function preloadMonaco(): void {\n  if (!monacoInstance && !loadingPromise) {\n    // Start loading but don't wait for it\n    loadMonaco().catch((error) => {\n      console.error(\"[MonacoLoader] Failed to preload Monaco from CDN:\", error);\n    });\n  }\n}\n\n/**\n * Check if page has any WASM blocks that need Monaco\n */\nexport function hasEditableBlocks(): boolean {\n  return document.querySelectorAll('[data-block-type=\"wasm\"]').length > 0;\n}\n", "/**\n * MonacoEditor - Wrapper for Monaco Editor with lazy loading\n */\n\nimport type * as monaco from \"monaco-editor\";\nimport { EditorOptions } from \"../types\";\nimport { loadMonaco } from \"./monaco-loader\";\n\nexport class MonacoEditor {\n  private editor: monaco.editor.IStandaloneCodeEditor | null = null;\n  private monaco: typeof monaco | null = null;\n  private container: HTMLElement;\n  private options: EditorOptions;\n  private onChangeCallback: ((code: string) => void) | null = null;\n  private initialCode: string;\n  private editorDiv: HTMLElement | null = null;\n  private initPromise: Promise<void> | null = null;\n\n  constructor(container: HTMLElement, initialCode: string, options: EditorOptions) {\n    this.container = container;\n    this.initialCode = initialCode;\n    this.options = options;\n\n    // Start lazy initialization immediately\n    this.initPromise = this.initialize();\n  }\n\n  private async initialize(): Promise<void> {\n    // Show loading indicator\n    const loadingDiv = document.createElement(\"div\");\n    loadingDiv.className = \"livepage-monaco-loading\";\n    loadingDiv.style.padding = \"2rem\";\n    loadingDiv.style.textAlign = \"center\";\n    loadingDiv.style.color = \"#999\";\n    loadingDiv.textContent = \"Loading editor...\";\n    this.container.appendChild(loadingDiv);\n\n    try {\n      // Lazy load Monaco\n      this.monaco = await loadMonaco();\n\n      // Remove loading indicator\n      loadingDiv.remove();\n\n      // Create editor container\n      this.editorDiv = document.createElement(\"div\");\n      this.editorDiv.className = \"livepage-monaco-editor\";\n      this.editorDiv.style.height = \"300px\"; // Default height\n      this.editorDiv.style.width = \"100%\";\n      this.container.appendChild(this.editorDiv);\n\n      // Initialize Monaco Editor\n      this.editor = this.monaco.editor.create(this.editorDiv, {\n        value: this.initialCode,\n        language: this.options.language,\n        theme: this.options.theme || \"vs-dark\",\n        readOnly: this.options.readonly,\n        minimap: {\n          enabled: this.options.minimap ?? true,\n        },\n        lineNumbers: this.options.lineNumbers !== false ? \"on\" : \"off\",\n        scrollBeyondLastLine: false,\n        automaticLayout: true,\n        fontSize: 14,\n        tabSize: 4,\n        insertSpaces: false, // Use tabs\n      });\n\n      // Listen for content changes\n      this.editor.onDidChangeModelContent(() => {\n        if (this.onChangeCallback && this.editor) {\n          this.onChangeCallback(this.editor.getValue());\n        }\n      });\n    } catch (error) {\n      console.error(\"[MonacoEditor] Failed to load Monaco:\", error);\n      loadingDiv.textContent = \"Failed to load editor\";\n      loadingDiv.style.color = \"#f44\";\n    }\n  }\n\n  /**\n   * Wait for editor to be ready\n   */\n  private async ensureReady(): Promise<void> {\n    if (this.initPromise) {\n      await this.initPromise;\n    }\n  }\n\n  /**\n   * Get current code from editor\n   */\n  getValue(): string {\n    return this.editor?.getValue() || \"\";\n  }\n\n  /**\n   * Set code in editor\n   */\n  async setValue(code: string): Promise<void> {\n    await this.ensureReady();\n    this.editor?.setValue(code);\n  }\n\n  /**\n   * Set onChange callback\n   */\n  onChange(callback: (code: string) => void): void {\n    this.onChangeCallback = callback;\n  }\n\n  /**\n   * Set read-only mode\n   */\n  async setReadOnly(readonly: boolean): Promise<void> {\n    await this.ensureReady();\n    this.editor?.updateOptions({ readOnly: readonly });\n  }\n\n  /**\n   * Focus the editor\n   */\n  async focus(): Promise<void> {\n    await this.ensureReady();\n    this.editor?.focus();\n  }\n\n  /**\n   * Layout the editor (call after resize)\n   */\n  async layout(): Promise<void> {\n    await this.ensureReady();\n    this.editor?.layout();\n  }\n\n  /**\n   * Destroy the editor\n   */\n  destroy(): void {\n    this.editor?.dispose();\n    this.editor = null;\n  }\n\n  /**\n   * Get the underlying Monaco editor instance\n   */\n  async getEditor(): Promise<monaco.editor.IStandaloneCodeEditor | null> {\n    await this.ensureReady();\n    return this.editor;\n  }\n}\n", "/**\n * OutputPanel - Displays execution output (stdout/stderr)\n */\n\nexport interface OutputLine {\n  type: \"stdout\" | \"stderr\" | \"error\" | \"info\";\n  text: string;\n  timestamp: number;\n}\n\nexport class OutputPanel {\n  private element: HTMLElement;\n  private lines: OutputLine[] = [];\n  private maxLines: number;\n  private autoScroll: boolean;\n\n  constructor(container: HTMLElement, maxLines = 1000, autoScroll = true) {\n    this.maxLines = maxLines;\n    this.autoScroll = autoScroll;\n\n    // Create output panel element\n    this.element = this.createPanel();\n    container.appendChild(this.element);\n  }\n\n  private createPanel(): HTMLElement {\n    const panel = document.createElement(\"div\");\n    panel.className = \"livepage-output-panel\";\n    panel.innerHTML = `\n      <div class=\"output-header\">\n        <span class=\"output-title\">Output</span>\n        <button class=\"output-clear\" title=\"Clear output\">Clear</button>\n      </div>\n      <div class=\"output-content\"></div>\n    `;\n\n    // Attach clear button handler\n    const clearBtn = panel.querySelector(\".output-clear\");\n    if (clearBtn) {\n      clearBtn.addEventListener(\"click\", () => this.clear());\n    }\n\n    return panel;\n  }\n\n  /**\n   * Append a line to the output\n   */\n  append(type: OutputLine[\"type\"], text: string): void {\n    const line: OutputLine = {\n      type,\n      text,\n      timestamp: Date.now(),\n    };\n\n    this.lines.push(line);\n\n    // Trim if exceeds max lines\n    if (this.lines.length > this.maxLines) {\n      this.lines = this.lines.slice(-this.maxLines);\n    }\n\n    this.render();\n  }\n\n  /**\n   * Append stdout\n   */\n  stdout(text: string): void {\n    this.append(\"stdout\", text);\n  }\n\n  /**\n   * Append stderr\n   */\n  stderr(text: string): void {\n    this.append(\"stderr\", text);\n  }\n\n  /**\n   * Append error\n   */\n  error(text: string): void {\n    this.append(\"error\", text);\n  }\n\n  /**\n   * Append info message\n   */\n  info(text: string): void {\n    this.append(\"info\", text);\n  }\n\n  /**\n   * Clear all output\n   */\n  clear(): void {\n    this.lines = [];\n    this.render();\n  }\n\n  /**\n   * Show the panel\n   */\n  show(): void {\n    this.element.style.display = \"block\";\n  }\n\n  /**\n   * Hide the panel\n   */\n  hide(): void {\n    this.element.style.display = \"none\";\n  }\n\n  /**\n   * Render the output lines\n   */\n  private render(): void {\n    const content = this.element.querySelector(\".output-content\");\n    if (!content) return;\n\n    // Clear existing content\n    content.innerHTML = \"\";\n\n    // Render each line\n    for (const line of this.lines) {\n      const lineElement = document.createElement(\"div\");\n      lineElement.className = `output-line output-${line.type}`;\n      lineElement.textContent = line.text;\n      content.appendChild(lineElement);\n    }\n\n    // Auto-scroll to bottom\n    if (this.autoScroll) {\n      content.scrollTop = content.scrollHeight;\n    }\n  }\n\n  /**\n   * Get the panel element\n   */\n  getElement(): HTMLElement {\n    return this.element;\n  }\n\n  /**\n   * Destroy the panel\n   */\n  destroy(): void {\n    this.element.remove();\n  }\n}\n", "/**\n * RunButton - Button for executing WASM code\n */\n\nexport type RunButtonCallback = () => void | Promise<void>;\n\nexport class RunButton {\n  private element: HTMLButtonElement;\n  private callback: RunButtonCallback | null = null;\n  private isRunning = false;\n\n  constructor(container: HTMLElement, label = \"Run\") {\n    this.element = this.createButton(label);\n    container.appendChild(this.element);\n  }\n\n  private createButton(label: string): HTMLButtonElement {\n    const button = document.createElement(\"button\");\n    button.className = \"livepage-run-button\";\n    button.textContent = label;\n    button.addEventListener(\"click\", () => this.handleClick());\n    return button;\n  }\n\n  /**\n   * Set the click callback\n   */\n  onClick(callback: RunButtonCallback): void {\n    this.callback = callback;\n  }\n\n  /**\n   * Handle button click\n   */\n  private async handleClick(): Promise<void> {\n    if (this.isRunning || !this.callback) return;\n\n    this.setRunning(true);\n\n    try {\n      await this.callback();\n    } catch (error) {\n      console.error(\"[RunButton] Error executing callback:\", error);\n    } finally {\n      this.setRunning(false);\n    }\n  }\n\n  /**\n   * Set running state\n   */\n  setRunning(running: boolean): void {\n    this.isRunning = running;\n    this.element.disabled = running;\n\n    if (running) {\n      this.element.classList.add(\"running\");\n      this.element.textContent = \"Running...\";\n    } else {\n      this.element.classList.remove(\"running\");\n      this.element.textContent = \"Run\";\n    }\n  }\n\n  /**\n   * Enable the button\n   */\n  enable(): void {\n    this.element.disabled = false;\n  }\n\n  /**\n   * Disable the button\n   */\n  disable(): void {\n    this.element.disabled = true;\n  }\n\n  /**\n   * Get the button element\n   */\n  getElement(): HTMLButtonElement {\n    return this.element;\n  }\n\n  /**\n   * Destroy the button\n   */\n  destroy(): void {\n    this.element.remove();\n  }\n}\n", "/**\n * TinyGoExecutor - Executes Go code via WASM\n *\n * TODO: Client-side TinyGo compilation requires further research.\n * Options:\n * 1. Server-side compilation endpoint (simpler, requires backend)\n * 2. TinyGo compiled to WASM running in browser (complex, large bundle)\n * 3. Hybrid: cache compiled WASM, fallback to server\n *\n * For MVP, we'll implement server-side compilation approach.\n */\n\nimport { WasmExecutionResult } from \"../types\";\n\nexport class TinyGoExecutor {\n  private serverUrl: string;\n  private debug: boolean;\n\n  constructor(serverUrl = \"/api/compile\", debug = false) {\n    this.serverUrl = serverUrl;\n    this.debug = debug;\n  }\n\n  /**\n   * Execute Go code (server-side compilation)\n   */\n  async execute(code: string): Promise<WasmExecutionResult> {\n    if (this.debug) {\n      console.log(\"[TinyGoExecutor] Executing code:\", code);\n    }\n\n    try {\n      // Send code to server for compilation\n      const response = await fetch(this.serverUrl, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ code }),\n      });\n\n      if (!response.ok) {\n        const error = await response.text();\n        return {\n          stdout: \"\",\n          stderr: error,\n          error: `Compilation failed: ${error}`,\n          exitCode: 1,\n        };\n      }\n\n      // Get compiled WASM binary\n      const wasmBuffer = await response.arrayBuffer();\n\n      // Execute WASM\n      return await this.executeWasm(wasmBuffer);\n    } catch (error) {\n      const errorMsg = error instanceof Error ? error.message : String(error);\n      return {\n        stdout: \"\",\n        stderr: \"\",\n        error: `Execution failed: ${errorMsg}`,\n        exitCode: 1,\n      };\n    }\n  }\n\n  /**\n   * Execute compiled WASM binary\n   */\n  private async executeWasm(wasmBuffer: ArrayBuffer): Promise<WasmExecutionResult> {\n    let stdout = \"\";\n    let stderr = \"\";\n\n    try {\n      // Create Go WASM environment\n      const go = new (window as any).Go();\n\n      // Capture stdout\n      const originalLog = console.log;\n      const originalError = console.error;\n\n      console.log = (...args: any[]) => {\n        stdout += args.join(\" \") + \"\\n\";\n      };\n\n      console.error = (...args: any[]) => {\n        stderr += args.join(\" \") + \"\\n\";\n      };\n\n      // Instantiate and run WASM\n      const result = await WebAssembly.instantiate(wasmBuffer, go.importObject);\n      await go.run(result.instance);\n\n      // Restore console\n      console.log = originalLog;\n      console.error = originalError;\n\n      return {\n        stdout,\n        stderr,\n        exitCode: 0,\n      };\n    } catch (error) {\n      const errorMsg = error instanceof Error ? error.message : String(error);\n      return {\n        stdout,\n        stderr,\n        error: `WASM execution failed: ${errorMsg}`,\n        exitCode: 1,\n      };\n    }\n  }\n\n  /**\n   * Check if TinyGo/WASM is supported\n   */\n  static isSupported(): boolean {\n    return (\n      typeof WebAssembly !== \"undefined\" &&\n      typeof (window as any).Go !== \"undefined\"\n    );\n  }\n}\n\n/**\n * Initialize WASM environment (loads wasm_exec.js from TinyGo)\n */\nexport async function initializeWasm(): Promise<void> {\n  if ((window as any).Go) {\n    return; // Already initialized\n  }\n\n  try {\n    // Load TinyGo's wasm_exec.js\n    const script = document.createElement(\"script\");\n    script.src = \"/assets/wasm_exec.js\";\n\n    await new Promise<void>((resolve, reject) => {\n      script.onload = () => resolve();\n      script.onerror = () => reject(new Error(\"Failed to load wasm_exec.js\"));\n      document.head.appendChild(script);\n    });\n\n    console.log(\"[TinyGoExecutor] WASM environment initialized\");\n  } catch (error) {\n    console.error(\"[TinyGoExecutor] Failed to initialize WASM:\", error);\n    throw error;\n  }\n}\n", "/**\n * WasmBlock - Editable code block with WASM execution\n */\n\nimport { BaseBlock } from \"./base-block\";\nimport { BlockConfig } from \"../types\";\nimport { PersistenceManager } from \"../core/persistence-manager\";\nimport { MonacoEditor } from \"../editor/monaco-editor\";\nimport { OutputPanel } from \"../ui/output-panel\";\nimport { RunButton } from \"../ui/run-button\";\nimport { TinyGoExecutor } from \"../wasm/tinygo-executor\";\n\nexport class WasmBlock extends BaseBlock {\n  private editor: MonacoEditor | null = null;\n  private outputPanel: OutputPanel | null = null;\n  private runButton: RunButton | null = null;\n  private executor: TinyGoExecutor | null = null;\n  private containerElement: HTMLElement | null = null;\n  private editorContainer: HTMLElement | null = null;\n  private controlsContainer: HTMLElement | null = null;\n\n  constructor(config: BlockConfig, persistence: PersistenceManager, debug = false) {\n    super(config, persistence, debug);\n  }\n\n  initialize(): void {\n    this.log(\"Initializing WASM block\");\n\n    // Load persisted code\n    this.currentCode = this.loadPersistedCode();\n\n    // Create block structure\n    this.createBlockStructure();\n\n    // Initialize components\n    this.initializeEditor();\n    this.initializeControls();\n    this.initializeExecutor();\n\n    this.log(\"WASM block initialized\");\n  }\n\n  destroy(): void {\n    this.log(\"Destroying WASM block\");\n\n    this.editor?.destroy();\n    this.outputPanel?.destroy();\n    this.runButton?.destroy();\n\n    this.editor = null;\n    this.outputPanel = null;\n    this.runButton = null;\n    this.executor = null;\n  }\n\n  handleMessage(action: string, data: any): void {\n    this.log(\"Received message:\", action, data);\n    // WASM blocks don't receive messages from server (client-side execution)\n  }\n\n  /**\n   * Create the block structure\n   */\n  private createBlockStructure(): void {\n    // Wrap existing element or create new structure\n    this.containerElement = document.createElement(\"div\");\n    this.containerElement.className = \"livepage-wasm-block\";\n    this.containerElement.dataset.blockId = this.id;\n\n    // Editor container\n    this.editorContainer = document.createElement(\"div\");\n    this.editorContainer.className = \"wasm-editor-container\";\n    this.containerElement.appendChild(this.editorContainer);\n\n    // Controls container (run button, reset, etc.)\n    this.controlsContainer = document.createElement(\"div\");\n    this.controlsContainer.className = \"wasm-controls\";\n    this.containerElement.appendChild(this.controlsContainer);\n\n    // Replace or append to original element\n    if (this.element.parentNode) {\n      this.element.parentNode.replaceChild(this.containerElement, this.element);\n    }\n  }\n\n  /**\n   * Initialize Monaco editor\n   */\n  private initializeEditor(): void {\n    if (!this.editorContainer) return;\n\n    this.editor = new MonacoEditor(\n      this.editorContainer,\n      this.currentCode,\n      {\n        language: this.metadata.language || \"go\",\n        readonly: this.metadata.readonly || false,\n        theme: \"vs-dark\",\n        minimap: false,\n        lineNumbers: true,\n      }\n    );\n\n    // Save code changes to persistence\n    this.editor.onChange((code) => {\n      this.setCode(code);\n    });\n\n    this.log(\"Editor initialized\");\n  }\n\n  /**\n   * Initialize controls (run button, reset, etc.)\n   */\n  private initializeControls(): void {\n    if (!this.controlsContainer) return;\n\n    // Create button container\n    const buttonContainer = document.createElement(\"div\");\n    buttonContainer.className = \"wasm-buttons\";\n\n    // Run button\n    this.runButton = new RunButton(buttonContainer, \"Run\");\n    this.runButton.onClick(() => this.executeCode());\n\n    // Reset button\n    const resetButton = document.createElement(\"button\");\n    resetButton.className = \"livepage-reset-button\";\n    resetButton.textContent = \"Reset\";\n    resetButton.addEventListener(\"click\", () => this.resetCode());\n    buttonContainer.appendChild(resetButton);\n\n    this.controlsContainer.appendChild(buttonContainer);\n\n    // Output panel\n    this.outputPanel = new OutputPanel(this.controlsContainer);\n    this.outputPanel.hide(); // Hide until first run\n\n    this.log(\"Controls initialized\");\n  }\n\n  /**\n   * Initialize WASM executor\n   */\n  private initializeExecutor(): void {\n    this.executor = new TinyGoExecutor(\"/api/compile\", this.debug);\n    this.log(\"Executor initialized\");\n  }\n\n  /**\n   * Execute the current code\n   */\n  private async executeCode(): Promise<void> {\n    if (!this.editor || !this.executor || !this.outputPanel) {\n      this.error(\"Cannot execute - components not initialized\");\n      return;\n    }\n\n    const code = this.editor.getValue();\n\n    this.log(\"Executing code\");\n    this.outputPanel.clear();\n    this.outputPanel.show();\n    this.outputPanel.info(\"Compiling and running...\");\n\n    try {\n      const result = await this.executor.execute(code);\n\n      // Clear \"Compiling...\" message\n      this.outputPanel.clear();\n\n      // Display output\n      if (result.stdout) {\n        this.outputPanel.stdout(result.stdout);\n      }\n\n      if (result.stderr) {\n        this.outputPanel.stderr(result.stderr);\n      }\n\n      if (result.error) {\n        this.outputPanel.error(result.error);\n      }\n\n      if (result.exitCode === 0 && !result.stdout && !result.stderr) {\n        this.outputPanel.info(\"Program completed successfully (no output)\");\n      }\n\n      this.log(\"Execution completed with exit code:\", result.exitCode);\n    } catch (error) {\n      const errorMsg = error instanceof Error ? error.message : String(error);\n      this.outputPanel.error(`Execution error: ${errorMsg}`);\n      this.error(\"Execution error:\", error);\n    }\n  }\n\n  /**\n   * Reset code to initial state\n   */\n  private resetCode(): void {\n    if (!this.editor) return;\n\n    this.editor.setValue(this.initialCode);\n    this.setCode(this.initialCode);\n    this.outputPanel?.clear();\n    this.log(\"Code reset to initial state\");\n  }\n}\n", "/**\n * LivepageClient - Main orchestrator for Livepage interactive documentation\n */\n\nimport { LivepageClientOptions, BlockConfig, BlockMetadata, MessageEnvelope } from \"./types\";\nimport { MessageRouter } from \"./core/message-router\";\nimport { PersistenceManager } from \"./core/persistence-manager\";\nimport { BaseBlock } from \"./blocks/base-block\";\nimport { ServerBlock } from \"./blocks/server-block\";\nimport { InteractiveBlock } from \"./blocks/interactive-block\";\nimport { WasmBlock } from \"./blocks/wasm-block\";\n\nexport class LivepageClient {\n  private options: LivepageClientOptions;\n  private router: MessageRouter;\n  private persistence: PersistenceManager;\n  private blocks: Map<string, BaseBlock> = new Map();\n  private ws: WebSocket | null = null;\n  private reconnectTimer: number | null = null;\n  private isConnected = false;\n\n  constructor(options: LivepageClientOptions) {\n    this.options = {\n      debug: false,\n      persistence: true,\n      cdnFallback: false,\n      ...options,\n    };\n\n    this.router = new MessageRouter(this.options.debug);\n    this.persistence = new PersistenceManager(\n      \"livepage:persistence\",\n      this.options.persistence,\n      this.options.debug\n    );\n\n    if (this.options.debug) {\n      console.log(\"[LivepageClient] Initialized with options:\", this.options);\n    }\n  }\n\n  /**\n   * Connect to the WebSocket server\n   */\n  connect(): void {\n    if (this.ws) {\n      console.warn(\"[LivepageClient] Already connected\");\n      return;\n    }\n\n    try {\n      this.ws = new WebSocket(this.options.wsUrl);\n\n      this.ws.onopen = () => {\n        this.isConnected = true;\n        console.log(\"[LivepageClient] Connected to server\");\n        this.options.onConnect?.();\n      };\n\n      this.ws.onclose = () => {\n        this.isConnected = false;\n        console.log(\"[LivepageClient] Disconnected from server\");\n        this.options.onDisconnect?.();\n        this.scheduleReconnect();\n      };\n\n      this.ws.onerror = (error) => {\n        console.error(\"[LivepageClient] WebSocket error:\", error);\n        this.options.onError?.(new Error(\"WebSocket error\"));\n      };\n\n      this.ws.onmessage = (event) => {\n        this.handleMessage(event.data);\n      };\n    } catch (error) {\n      console.error(\"[LivepageClient] Failed to connect:\", error);\n      this.options.onError?.(error as Error);\n    }\n  }\n\n  /**\n   * Disconnect from the server\n   */\n  disconnect(): void {\n    if (this.reconnectTimer) {\n      clearTimeout(this.reconnectTimer);\n      this.reconnectTimer = null;\n    }\n\n    if (this.ws) {\n      this.ws.close();\n      this.ws = null;\n    }\n\n    this.isConnected = false;\n  }\n\n  /**\n   * Handle incoming WebSocket messages\n   */\n  private handleMessage(data: string): void {\n    if (this.options.debug) {\n      console.log(\"[LivepageClient] Received message:\", data);\n    }\n\n    // Route message to appropriate block\n    this.router.route(data);\n  }\n\n  /**\n   * Send a message to the server\n   */\n  send(blockID: string, action: string, data: any = {}): void {\n    if (!this.isConnected || !this.ws) {\n      console.warn(\"[LivepageClient] Cannot send - not connected\");\n      return;\n    }\n\n    const envelope: MessageEnvelope = {\n      blockID,\n      action,\n      data,\n    };\n\n    const message = JSON.stringify(envelope);\n\n    if (this.options.debug) {\n      console.log(\"[LivepageClient] Sending message:\", message);\n    }\n\n    this.ws.send(message);\n  }\n\n  /**\n   * Schedule reconnection attempt\n   */\n  private scheduleReconnect(): void {\n    if (this.reconnectTimer) {\n      return;\n    }\n\n    this.reconnectTimer = window.setTimeout(() => {\n      this.reconnectTimer = null;\n      console.log(\"[LivepageClient] Attempting to reconnect...\");\n      this.connect();\n    }, 3000);\n  }\n\n  /**\n   * Discover and register all code blocks on the page\n   */\n  discoverBlocks(): void {\n    console.log(\"[LivepageClient] Discovering blocks...\");\n\n    // Find all code blocks with livepage metadata\n    const codeBlocks = document.querySelectorAll<HTMLElement>(\n      \"[data-livepage-block]\"\n    );\n\n    for (const element of Array.from(codeBlocks)) {\n      try {\n        const metadata = this.extractMetadata(element);\n        const initialCode = this.extractCode(element);\n\n        const config: BlockConfig = {\n          element,\n          metadata,\n          initialCode,\n        };\n\n        this.registerBlock(config);\n      } catch (error) {\n        console.error(\"[LivepageClient] Error discovering block:\", error);\n      }\n    }\n\n    console.log(`[LivepageClient] Discovered ${this.blocks.size} blocks`);\n  }\n\n  /**\n   * Extract metadata from a code block element\n   */\n  private extractMetadata(element: HTMLElement): BlockMetadata {\n    const id = element.dataset.blockId || this.generateBlockId();\n    const type = (element.dataset.blockType as any) || \"server\";\n    const language = element.dataset.language || \"go\";\n    const readonly = element.dataset.readonly === \"true\";\n    const editable = element.dataset.editable === \"true\";\n    const stateRef = element.dataset.stateRef;\n\n    return {\n      id,\n      type,\n      language,\n      readonly,\n      editable,\n      stateRef,\n    };\n  }\n\n  /**\n   * Extract code from a code block element\n   */\n  private extractCode(element: HTMLElement): string {\n    // Try to find code element\n    const codeElement = element.querySelector(\"code\");\n    if (codeElement) {\n      return codeElement.textContent || \"\";\n    }\n\n    // Fallback to element text content\n    return element.textContent || \"\";\n  }\n\n  /**\n   * Generate a unique block ID\n   */\n  private generateBlockId(): string {\n    return `block-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  /**\n   * Register a code block\n   */\n  registerBlock(config: BlockConfig): void {\n    const { metadata } = config;\n\n    if (this.blocks.has(metadata.id)) {\n      console.warn(`[LivepageClient] Block already registered: ${metadata.id}`);\n      return;\n    }\n\n    // Create appropriate block type\n    let block: BaseBlock;\n\n    switch (metadata.type) {\n      case \"server\":\n        block = new ServerBlock(config, this.persistence, this.options.debug);\n        break;\n\n      case \"interactive\":\n      case \"lvt\":\n        block = new InteractiveBlock(config, this.persistence, this.options.debug);\n        // Set message sender for interactive blocks\n        (block as InteractiveBlock).setMessageSender((blockID, action, data) => {\n          this.send(blockID, action, data);\n        });\n        break;\n\n      case \"wasm\":\n        block = new WasmBlock(config, this.persistence, this.options.debug);\n        break;\n\n      default:\n        console.warn(`[LivepageClient] Unknown block type: ${metadata.type}`);\n        return;\n    }\n\n    // Initialize the block\n    block.initialize();\n\n    // Register with router (for message handling)\n    this.router.register(metadata.id, (action, data) => {\n      block.handleMessage(action, data);\n    });\n\n    // Store block reference\n    this.blocks.set(metadata.id, block);\n\n    if (this.options.debug) {\n      console.log(`[LivepageClient] Registered block: ${metadata.id} (${metadata.type})`);\n    }\n  }\n\n  /**\n   * Unregister a code block\n   */\n  unregisterBlock(blockID: string): void {\n    const block = this.blocks.get(blockID);\n    if (!block) {\n      return;\n    }\n\n    // Destroy the block\n    block.destroy();\n\n    // Unregister from router\n    this.router.unregister(blockID);\n\n    // Remove from blocks map\n    this.blocks.delete(blockID);\n\n    if (this.options.debug) {\n      console.log(`[LivepageClient] Unregistered block: ${blockID}`);\n    }\n  }\n\n  /**\n   * Get a block by ID\n   */\n  getBlock(blockID: string): BaseBlock | undefined {\n    return this.blocks.get(blockID);\n  }\n\n  /**\n   * Get all block IDs\n   */\n  getBlockIds(): string[] {\n    return Array.from(this.blocks.keys());\n  }\n\n  /**\n   * Destroy the client and all blocks\n   */\n  destroy(): void {\n    console.log(\"[LivepageClient] Destroying client\");\n\n    // Destroy all blocks\n    for (const block of this.blocks.values()) {\n      block.destroy();\n    }\n\n    this.blocks.clear();\n    this.router.clear();\n    this.disconnect();\n  }\n}\n", "/**\n * Tutorial Step Navigation\n *\n * Provides navigation controls for multi-step tutorials including:\n * - Sidebar table of contents\n * - Bottom navigation bar (prev/next buttons)\n * - Keyboard shortcuts\n * - URL hash support for deep linking\n * - Smooth scrolling between sections\n */\n\nexport interface TutorialStep {\n  id: string;\n  title: string;\n  element: HTMLElement;\n  index: number;\n}\n\nexport class TutorialNavigation {\n  private steps: TutorialStep[] = [];\n  private currentStepIndex: number = 0;\n  private sidebar: HTMLElement | null = null;\n  private bottomNav: HTMLElement | null = null;\n\n  constructor() {\n    this.init();\n  }\n\n  private init() {\n    // Skip tutorial navigation if site navigation exists\n    if (document.querySelector('.livepage-nav-sidebar')) {\n      return; // Site mode - navigation already rendered by server\n    }\n\n    // Parse H2 headings as tutorial steps\n    this.parseSteps();\n\n    if (this.steps.length === 0) {\n      return; // No multi-step tutorial\n    }\n\n    // Create navigation UI\n    this.createSidebar();\n    this.createBottomNav();\n\n    // Set up event listeners\n    this.setupKeyboardShortcuts();\n    this.setupHashNavigation();\n    this.setupScrollTracking();\n\n    // Initialize from URL hash or show first step\n    this.initializeFromHash();\n  }\n\n  private parseSteps() {\n    const headings = document.querySelectorAll('h2');\n\n    headings.forEach((heading, index) => {\n      const id = heading.id || this.generateId(heading.textContent || '');\n\n      // Ensure heading has an ID for navigation\n      if (!heading.id) {\n        heading.id = id;\n      }\n\n      this.steps.push({\n        id,\n        title: heading.textContent || '',\n        element: heading as HTMLElement,\n        index\n      });\n    });\n  }\n\n  private generateId(text: string): string {\n    return text\n      .toLowerCase()\n      .replace(/[^\\w\\s-]/g, '')\n      .replace(/\\s+/g, '-')\n      .replace(/-+/g, '-')\n      .trim();\n  }\n\n  private createSidebar() {\n    // Create sidebar container\n    this.sidebar = document.createElement('nav');\n    this.sidebar.className = 'livepage-nav-sidebar';\n    this.sidebar.innerHTML = `\n      <div class=\"nav-sidebar-header\">\n        <h3>Contents</h3>\n      </div>\n      <ol class=\"nav-sidebar-steps\">\n        ${this.steps.map((step, i) => `\n          <li class=\"nav-step ${i === 0 ? 'active' : ''}\" data-step=\"${i}\">\n            <a href=\"#${step.id}\">\n              <span class=\"step-number\">${i + 1}</span>\n              <span class=\"step-title\">${step.title}</span>\n            </a>\n          </li>\n        `).join('')}\n      </ol>\n    `;\n\n    // Add click handlers\n    this.sidebar.querySelectorAll('.nav-step').forEach((stepEl, i) => {\n      stepEl.addEventListener('click', (e) => {\n        e.preventDefault();\n        this.navigateToStep(i);\n      });\n    });\n\n    document.body.appendChild(this.sidebar);\n  }\n\n  private createBottomNav() {\n    this.bottomNav = document.createElement('nav');\n    this.bottomNav.className = 'livepage-nav-bottom';\n    this.bottomNav.innerHTML = `\n      <button class=\"nav-btn nav-prev\" ${this.currentStepIndex === 0 ? 'disabled' : ''}>\n        <span class=\"nav-arrow\">\u2190</span>\n        <span class=\"nav-label\">Previous</span>\n      </button>\n      <span class=\"nav-progress\">\n        Step <span class=\"current-step\">1</span> of <span class=\"total-steps\">${this.steps.length}</span>\n      </span>\n      <button class=\"nav-btn nav-next\" ${this.currentStepIndex === this.steps.length - 1 ? 'disabled' : ''}>\n        <span class=\"nav-label\">Next</span>\n        <span class=\"nav-arrow\">\u2192</span>\n      </button>\n    `;\n\n    // Add click handlers\n    const prevBtn = this.bottomNav.querySelector('.nav-prev');\n    const nextBtn = this.bottomNav.querySelector('.nav-next');\n\n    prevBtn?.addEventListener('click', () => this.navigatePrev());\n    nextBtn?.addEventListener('click', () => this.navigateNext());\n\n    document.body.appendChild(this.bottomNav);\n  }\n\n  private setupKeyboardShortcuts() {\n    document.addEventListener('keydown', (e) => {\n      // Ignore if user is typing in an input\n      if (e.target instanceof HTMLInputElement || e.target instanceof HTMLTextAreaElement) {\n        return;\n      }\n\n      switch (e.key) {\n        case 'ArrowRight':\n        case 'ArrowDown':\n          e.preventDefault();\n          this.navigateNext();\n          break;\n        case 'ArrowLeft':\n        case 'ArrowUp':\n          e.preventDefault();\n          this.navigatePrev();\n          break;\n      }\n    });\n  }\n\n  private setupHashNavigation() {\n    window.addEventListener('hashchange', () => {\n      this.handleHashChange();\n    });\n  }\n\n  private setupScrollTracking() {\n    // Track which section is currently visible\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting) {\n            const heading = entry.target as HTMLElement;\n            const stepIndex = this.steps.findIndex(s => s.element === heading);\n            if (stepIndex !== -1 && stepIndex !== this.currentStepIndex) {\n              this.updateCurrentStep(stepIndex, false); // Don't scroll, just update UI\n            }\n          }\n        });\n      },\n      {\n        threshold: 0.5,\n        rootMargin: '-100px 0px -50% 0px'\n      }\n    );\n\n    this.steps.forEach(step => observer.observe(step.element));\n  }\n\n  private initializeFromHash() {\n    const hash = window.location.hash.slice(1);\n    if (hash) {\n      const stepIndex = this.steps.findIndex(s => s.id === hash);\n      if (stepIndex !== -1) {\n        this.navigateToStep(stepIndex);\n        return;\n      }\n    }\n\n    // Default to first step\n    this.updateCurrentStep(0, false);\n  }\n\n  private handleHashChange() {\n    const hash = window.location.hash.slice(1);\n    if (hash) {\n      const stepIndex = this.steps.findIndex(s => s.id === hash);\n      if (stepIndex !== -1) {\n        this.navigateToStep(stepIndex, false); // Don't update hash again\n      }\n    }\n  }\n\n  private navigateToStep(index: number, updateHash: boolean = true) {\n    if (index < 0 || index >= this.steps.length) {\n      return;\n    }\n\n    this.updateCurrentStep(index, true);\n\n    if (updateHash) {\n      history.pushState(null, '', `#${this.steps[index].id}`);\n    }\n  }\n\n  private navigateNext() {\n    if (this.currentStepIndex < this.steps.length - 1) {\n      this.navigateToStep(this.currentStepIndex + 1);\n    }\n  }\n\n  private navigatePrev() {\n    if (this.currentStepIndex > 0) {\n      this.navigateToStep(this.currentStepIndex - 1);\n    }\n  }\n\n  private updateCurrentStep(index: number, scroll: boolean = true) {\n    this.currentStepIndex = index;\n\n    // Update sidebar\n    if (this.sidebar) {\n      this.sidebar.querySelectorAll('.nav-step').forEach((el, i) => {\n        el.classList.toggle('active', i === index);\n      });\n    }\n\n    // Update bottom nav\n    if (this.bottomNav) {\n      const prevBtn = this.bottomNav.querySelector('.nav-prev') as HTMLButtonElement;\n      const nextBtn = this.bottomNav.querySelector('.nav-next') as HTMLButtonElement;\n      const currentStepEl = this.bottomNav.querySelector('.current-step');\n\n      if (prevBtn) prevBtn.disabled = index === 0;\n      if (nextBtn) nextBtn.disabled = index === this.steps.length - 1;\n      if (currentStepEl) currentStepEl.textContent = String(index + 1);\n    }\n\n    // Scroll to step\n    if (scroll) {\n      this.scrollToStep(index);\n    }\n  }\n\n  private scrollToStep(index: number) {\n    const step = this.steps[index];\n    if (!step) return;\n\n    step.element.scrollIntoView({\n      behavior: 'smooth',\n      block: 'start'\n    });\n  }\n\n  // Public API\n  public getCurrentStep(): number {\n    return this.currentStepIndex;\n  }\n\n  public getTotalSteps(): number {\n    return this.steps.length;\n  }\n\n  public goToStep(index: number) {\n    this.navigateToStep(index);\n  }\n}\n", "/**\n * Search Functionality for Site Mode\n *\n * Provides client-side search across all pages with:\n * - Fuzzy search through titles and content\n * - Keyboard shortcuts (Ctrl+K / Cmd+K)\n * - Search result highlighting\n * - Modal/overlay UI\n */\n\nimport './search.css';\n\nexport interface SearchEntry {\n  title: string;\n  path: string;\n  content: string;\n  section?: string;\n}\n\nexport interface SearchResult extends SearchEntry {\n  score: number;\n  titleMatches: boolean;\n  contentMatches: boolean;\n}\n\nexport class SiteSearch {\n  public searchIndex: SearchEntry[] = []; // Made public for testing\n  private searchModal: HTMLElement | null = null;\n  private searchInput: HTMLInputElement | null = null;\n  private resultsContainer: HTMLElement | null = null;\n  private selectedIndex: number = 0;\n\n  constructor() {\n    // Only initialize in site mode\n    if (!document.querySelector('.livepage-nav-sidebar')) {\n      return;\n    }\n\n    this.init();\n  }\n\n  private async init() {\n    // Load search index\n    await this.loadSearchIndex();\n\n    // Create search UI\n    this.createSearchModal();\n\n    // Setup keyboard shortcuts\n    this.setupKeyboardShortcuts();\n\n    // Add search button to navigation\n    this.addSearchButton();\n  }\n\n  private async loadSearchIndex() {\n    try {\n      const response = await fetch('/search-index.json');\n      if (!response.ok) {\n        console.warn('[Search] Failed to load search index');\n        return;\n      }\n\n      this.searchIndex = await response.json();\n      console.log(`[Search] Loaded ${this.searchIndex.length} pages`);\n    } catch (error) {\n      console.error('[Search] Error loading search index:', error);\n    }\n  }\n\n  private createSearchModal() {\n    this.searchModal = document.createElement('div');\n    this.searchModal.className = 'search-modal';\n    this.searchModal.innerHTML = `\n      <div class=\"search-backdrop\"></div>\n      <div class=\"search-container\">\n        <div class=\"search-input-wrapper\">\n          <svg class=\"search-icon\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n          </svg>\n          <input\n            type=\"text\"\n            class=\"search-input\"\n            placeholder=\"Search documentation...\"\n            autocomplete=\"off\"\n            spellcheck=\"false\"\n          />\n          <button class=\"search-close\" aria-label=\"Close search\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n        <div class=\"search-results\"></div>\n        <div class=\"search-footer\">\n          <div class=\"search-hints\">\n            <span><kbd>\u2191</kbd><kbd>\u2193</kbd> Navigate</span>\n            <span><kbd>\u21B5</kbd> Select</span>\n            <span><kbd>Esc</kbd> Close</span>\n          </div>\n        </div>\n      </div>\n    `;\n\n    document.body.appendChild(this.searchModal);\n\n    // Get references\n    this.searchInput = this.searchModal.querySelector('.search-input');\n    this.resultsContainer = this.searchModal.querySelector('.search-results');\n\n    // Setup event listeners\n    this.searchInput?.addEventListener('input', () => this.handleSearch());\n    this.searchInput?.addEventListener('keydown', (e) => this.handleKeyDown(e));\n\n    this.searchModal.querySelector('.search-close')?.addEventListener('click', () => this.closeSearch());\n    this.searchModal.querySelector('.search-backdrop')?.addEventListener('click', () => this.closeSearch());\n  }\n\n  private addSearchButton() {\n    const sidebar = document.querySelector('.livepage-nav-sidebar');\n    if (!sidebar) return;\n\n    const header = sidebar.querySelector('.nav-header');\n    if (!header) return;\n\n    const searchButton = document.createElement('button');\n    searchButton.className = 'search-button';\n    searchButton.innerHTML = `\n      <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n      </svg>\n      <span>Search</span>\n      <kbd>\u2318K</kbd>\n    `;\n    searchButton.addEventListener('click', () => this.openSearch());\n\n    header.appendChild(searchButton);\n  }\n\n  private setupKeyboardShortcuts() {\n    document.addEventListener('keydown', (e) => {\n      // Ctrl+K or Cmd+K\n      if ((e.ctrlKey || e.metaKey) && e.key === 'k') {\n        e.preventDefault();\n        this.openSearch();\n      }\n\n      // Escape to close\n      if (e.key === 'Escape' && this.searchModal?.classList.contains('open')) {\n        this.closeSearch();\n      }\n    });\n  }\n\n  private openSearch() {\n    this.searchModal?.classList.add('open');\n    this.searchInput?.focus();\n    this.selectedIndex = 0;\n  }\n\n  private closeSearch() {\n    this.searchModal?.classList.remove('open');\n    if (this.searchInput) {\n      this.searchInput.value = '';\n    }\n    if (this.resultsContainer) {\n      this.resultsContainer.innerHTML = '';\n    }\n  }\n\n  private handleSearch() {\n    const query = this.searchInput?.value.trim() || '';\n\n    if (query.length === 0) {\n      if (this.resultsContainer) {\n        this.resultsContainer.innerHTML = '';\n      }\n      return;\n    }\n\n    const results = this.search(query);\n    this.renderResults(results);\n  }\n\n  private search(query: string): SearchResult[] {\n    const lowerQuery = query.toLowerCase();\n    const results: SearchResult[] = [];\n\n    for (const entry of this.searchIndex) {\n      const lowerTitle = entry.title.toLowerCase();\n      const lowerContent = entry.content.toLowerCase();\n\n      const titleMatches = lowerTitle.includes(lowerQuery);\n      const contentMatches = lowerContent.includes(lowerQuery);\n\n      if (titleMatches || contentMatches) {\n        // Calculate score (title matches are worth more)\n        let score = 0;\n        if (titleMatches) {\n          score += 10;\n          // Exact match or starts with gets bonus\n          if (lowerTitle === lowerQuery) score += 50;\n          else if (lowerTitle.startsWith(lowerQuery)) score += 20;\n        }\n        if (contentMatches) {\n          score += 1;\n        }\n\n        results.push({\n          ...entry,\n          score,\n          titleMatches,\n          contentMatches,\n        });\n      }\n    }\n\n    // Sort by score (highest first)\n    results.sort((a, b) => b.score - a.score);\n\n    // Limit to top 10 results\n    return results.slice(0, 10);\n  }\n\n  private renderResults(results: SearchResult[]) {\n    if (!this.resultsContainer) return;\n\n    if (results.length === 0) {\n      this.resultsContainer.innerHTML = '<div class=\"search-no-results\">No results found</div>';\n      return;\n    }\n\n    this.resultsContainer.innerHTML = results.map((result, index) => `\n      <a\n        href=\"${result.path}\"\n        class=\"search-result ${index === this.selectedIndex ? 'selected' : ''}\"\n        data-index=\"${index}\"\n      >\n        <div class=\"search-result-title\">\n          ${this.highlightMatch(result.title, this.searchInput?.value || '')}\n        </div>\n        ${result.section ? `<div class=\"search-result-section\">${result.section}</div>` : ''}\n        <div class=\"search-result-content\">\n          ${this.highlightMatch(this.truncateContent(result.content), this.searchInput?.value || '')}\n        </div>\n      </a>\n    `).join('');\n\n    // Add click handlers\n    this.resultsContainer.querySelectorAll('.search-result').forEach((el) => {\n      el.addEventListener('click', () => this.closeSearch());\n    });\n  }\n\n  private highlightMatch(text: string, query: string): string {\n    if (!query) return text;\n\n    const regex = new RegExp(`(${this.escapeRegex(query)})`, 'gi');\n    return text.replace(regex, '<mark>$1</mark>');\n  }\n\n  private truncateContent(content: string, maxLength: number = 200): string {\n    if (content.length <= maxLength) return content;\n    return content.substring(0, maxLength) + '...';\n  }\n\n  private escapeRegex(str: string): string {\n    return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n  }\n\n  private handleKeyDown(e: KeyboardEvent) {\n    if (!this.resultsContainer) return;\n\n    const results = this.resultsContainer.querySelectorAll('.search-result');\n\n    switch (e.key) {\n      case 'Escape':\n        e.preventDefault();\n        this.closeSearch();\n        break;\n\n      case 'ArrowDown':\n        if (results.length === 0) return;\n        e.preventDefault();\n        this.selectedIndex = Math.min(this.selectedIndex + 1, results.length - 1);\n        this.updateSelection();\n        break;\n\n      case 'ArrowUp':\n        if (results.length === 0) return;\n        e.preventDefault();\n        this.selectedIndex = Math.max(this.selectedIndex - 1, 0);\n        this.updateSelection();\n        break;\n\n      case 'Enter':\n        if (results.length === 0) return;\n        e.preventDefault();\n        const selected = results[this.selectedIndex] as HTMLAnchorElement;\n        if (selected) {\n          window.location.href = selected.href;\n          this.closeSearch();\n        }\n        break;\n    }\n  }\n\n  private updateSelection() {\n    if (!this.resultsContainer) return;\n\n    const results = this.resultsContainer.querySelectorAll('.search-result');\n    results.forEach((el, index) => {\n      el.classList.toggle('selected', index === this.selectedIndex);\n    });\n\n    // Scroll selected result into view\n    const selected = results[this.selectedIndex] as HTMLElement;\n    if (selected) {\n      selected.scrollIntoView({ block: 'nearest', behavior: 'smooth' });\n    }\n  }\n}\n", "/**\n * Code Copy Button Functionality\n * Adds copy buttons to all code blocks in documentation\n */\n\nimport './code-copy.css';\n\nexport class CodeCopy {\n  private static readonly COPY_BUTTON_CLASS = 'code-copy-btn';\n  private static readonly CODE_WRAPPER_CLASS = 'code-block-wrapper';\n  private static readonly COPIED_CLASS = 'copied';\n\n  constructor() {\n    this.init();\n  }\n\n  /**\n   * Initialize code copy functionality\n   */\n  private init(): void {\n    // Wait for DOM to be ready\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', () => this.addCopyButtons());\n    } else {\n      this.addCopyButtons();\n    }\n  }\n\n  /**\n   * Add copy buttons to all pre > code blocks\n   */\n  private addCopyButtons(): void {\n    const codeBlocks = document.querySelectorAll('pre > code');\n\n    codeBlocks.forEach((codeElement) => {\n      const pre = codeElement.parentElement;\n      if (!pre || pre.querySelector(`.${CodeCopy.COPY_BUTTON_CLASS}`)) {\n        // Already has a copy button\n        return;\n      }\n\n      // Wrap pre in a container for positioning\n      if (!pre.parentElement?.classList.contains(CodeCopy.CODE_WRAPPER_CLASS)) {\n        const wrapper = document.createElement('div');\n        wrapper.className = CodeCopy.CODE_WRAPPER_CLASS;\n        pre.parentNode?.insertBefore(wrapper, pre);\n        wrapper.appendChild(pre);\n      }\n\n      // Create copy button\n      const button = this.createCopyButton();\n      pre.appendChild(button);\n\n      // Add click handler\n      button.addEventListener('click', (e) => {\n        e.preventDefault();\n        this.copyCode(codeElement as HTMLElement, button);\n      });\n    });\n  }\n\n  /**\n   * Create copy button element\n   */\n  private createCopyButton(): HTMLButtonElement {\n    const button = document.createElement('button');\n    button.className = CodeCopy.COPY_BUTTON_CLASS;\n    button.setAttribute('aria-label', 'Copy code to clipboard');\n    button.innerHTML = this.getCopyIcon();\n    return button;\n  }\n\n  /**\n   * Copy code to clipboard\n   */\n  private async copyCode(codeElement: HTMLElement, button: HTMLButtonElement): Promise<void> {\n    const code = codeElement.textContent || '';\n\n    try {\n      await navigator.clipboard.writeText(code);\n      this.showCopiedFeedback(button);\n    } catch (err) {\n      console.error('Failed to copy code:', err);\n      // Fallback for older browsers\n      this.fallbackCopy(code, button);\n    }\n  }\n\n  /**\n   * Show \"Copied!\" feedback\n   */\n  private showCopiedFeedback(button: HTMLButtonElement): void {\n    button.classList.add(CodeCopy.COPIED_CLASS);\n    button.innerHTML = this.getCheckIcon();\n    button.setAttribute('aria-label', 'Code copied!');\n\n    setTimeout(() => {\n      button.classList.remove(CodeCopy.COPIED_CLASS);\n      button.innerHTML = this.getCopyIcon();\n      button.setAttribute('aria-label', 'Copy code to clipboard');\n    }, 2000);\n  }\n\n  /**\n   * Fallback copy method for older browsers\n   */\n  private fallbackCopy(text: string, button: HTMLButtonElement): void {\n    const textarea = document.createElement('textarea');\n    textarea.value = text;\n    textarea.style.position = 'fixed';\n    textarea.style.opacity = '0';\n    document.body.appendChild(textarea);\n    textarea.select();\n\n    try {\n      document.execCommand('copy');\n      this.showCopiedFeedback(button);\n    } catch (err) {\n      console.error('Fallback copy failed:', err);\n    } finally {\n      document.body.removeChild(textarea);\n    }\n  }\n\n  /**\n   * Get copy icon SVG\n   */\n  private getCopyIcon(): string {\n    return `\n      <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M10.5 2H3.5C2.67 2 2 2.67 2 3.5V10.5\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        <rect x=\"5.5\" y=\"5.5\" width=\"8\" height=\"8\" rx=\"1\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n      </svg>\n    `;\n  }\n\n  /**\n   * Get check icon SVG (for \"copied\" state)\n   */\n  private getCheckIcon(): string {\n    return `\n      <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M3 8L6.5 11.5L13 4\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n      </svg>\n    `;\n  }\n}\n", "/**\n * Page Table of Contents (TOC)\n *\n * Adds on-page navigation for H2 sections in documentation pages.\n * This is specifically for site-mode pages that already have site navigation sidebar.\n * Unlike TutorialNavigation (which creates its own sidebar), PageTOC adds a\n * section to the existing sidebar showing H2 sections within the current page.\n */\n\nimport './page-toc.css';\n\nexport interface PageSection {\n  id: string;\n  title: string;\n  element: HTMLElement;\n  index: number;\n}\n\nexport class PageTOC {\n  private sections: PageSection[] = [];\n  private tocElement: HTMLElement | null = null;\n  private currentActiveSection: number = -1;\n\n  constructor() {\n    this.init();\n  }\n\n  private init() {\n    // Only run in site mode (when site navigation sidebar exists)\n    const siteNav = document.querySelector('.livepage-nav-sidebar');\n    if (!siteNav) {\n      return; // Not in site mode\n    }\n\n    // Parse H2 headings as page sections\n    this.parseSections();\n\n    if (this.sections.length === 0) {\n      return; // No sections to show\n    }\n\n    // Create TOC UI in the sidebar\n    this.createTOC();\n\n    // Set up scroll tracking to highlight current section\n    this.setupScrollTracking();\n  }\n\n  private parseSections() {\n    // Find all H2 elements within .content-wrapper\n    const headings = document.querySelectorAll('.content-wrapper h2');\n\n    headings.forEach((heading, index) => {\n      const id = heading.id || this.generateId(heading.textContent || '');\n\n      // Ensure heading has an ID for navigation\n      if (!heading.id) {\n        heading.id = id;\n      }\n\n      this.sections.push({\n        id,\n        title: heading.textContent || '',\n        element: heading as HTMLElement,\n        index\n      });\n    });\n  }\n\n  private generateId(text: string): string {\n    return text\n      .toLowerCase()\n      .replace(/[^\\w\\s-]/g, '')\n      .replace(/\\s+/g, '-')\n      .replace(/-+/g, '-')\n      .trim();\n  }\n\n  private createTOC() {\n    const siteNav = document.querySelector('.livepage-nav-sidebar');\n    if (!siteNav) return;\n\n    // Find the current page link in the navigation\n    const currentPageLink = siteNav.querySelector('.nav-page-link.active');\n    if (!currentPageLink) return; // Can't add sub-nav if we don't know current page\n\n    const currentPageItem = currentPageLink.closest('li');\n    if (!currentPageItem) return;\n\n    // Create nested list of H2 sections\n    const subNav = document.createElement('ul');\n    subNav.className = 'page-toc-list';\n    subNav.innerHTML = this.sections.map((section, i) => `\n      <li class=\"page-toc-item\" data-section=\"${i}\">\n        <a href=\"#${section.id}\" class=\"page-toc-link\">\n          ${this.escapeHtml(section.title)}\n        </a>\n      </li>\n    `).join('');\n\n    // Add click handlers\n    subNav.querySelectorAll('.page-toc-item').forEach((itemEl, i) => {\n      const link = itemEl.querySelector('a');\n      link?.addEventListener('click', (e) => {\n        e.preventDefault();\n        this.scrollToSection(i);\n      });\n    });\n\n    // Insert sub-navigation under the current page\n    currentPageItem.appendChild(subNav);\n\n    // Add expanded class to current page item\n    currentPageItem.classList.add('has-subnav');\n\n    this.tocElement = subNav;\n  }\n\n  private escapeHtml(text: string): string {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  }\n\n  private setupScrollTracking() {\n    // Track which section is currently visible\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting) {\n            const heading = entry.target as HTMLElement;\n            const sectionIndex = this.sections.findIndex(s => s.element === heading);\n            if (sectionIndex !== -1 && sectionIndex !== this.currentActiveSection) {\n              this.updateActiveSection(sectionIndex);\n            }\n          }\n        });\n      },\n      {\n        threshold: 0.5,\n        rootMargin: '-100px 0px -50% 0px'\n      }\n    );\n\n    this.sections.forEach(section => observer.observe(section.element));\n  }\n\n  private updateActiveSection(index: number) {\n    this.currentActiveSection = index;\n\n    if (!this.tocElement) return;\n\n    // Update active state in TOC\n    this.tocElement.querySelectorAll('.page-toc-item').forEach((el, i) => {\n      el.classList.toggle('active', i === index);\n    });\n  }\n\n  private scrollToSection(index: number) {\n    const section = this.sections[index];\n    if (!section) return;\n\n    section.element.scrollIntoView({\n      behavior: 'smooth',\n      block: 'start'\n    });\n\n    // Update URL hash\n    history.pushState(null, '', `#${section.id}`);\n  }\n}\n", "/**\n * Auto-initialization for browser builds\n */\n\nimport { LivepageClient } from \"./livepage-client\";\nimport { TutorialNavigation } from \"./core/navigation\";\nimport { SiteSearch } from \"./core/search\";\nimport { CodeCopy } from \"./core/code-copy\";\nimport { PageTOC } from \"./core/page-toc\";\nimport { hasEditableBlocks, preloadMonaco } from \"./editor/monaco-loader\";\n\n/**\n * Auto-initialization function\n */\nfunction initializeLivepage(): void {\n  // Check if auto-init is disabled\n  if ((window as any).LIVEPAGE_DISABLE_AUTO_INIT) {\n    console.log(\"[Livepage] Auto-initialization disabled\");\n    return;\n  }\n\n  // Get WebSocket URL from meta tag or default\n  const wsMeta = document.querySelector<HTMLMetaElement>('meta[name=\"livepage-ws-url\"]');\n  const wsUrl = wsMeta?.content || `ws://${window.location.host}/ws`;\n\n  // Get debug flag from meta tag\n  const debugMeta = document.querySelector<HTMLMetaElement>('meta[name=\"livepage-debug\"]');\n  const debug = debugMeta?.content === \"true\";\n\n  // Preload Monaco if page has WASM blocks (lazy load in background)\n  if (hasEditableBlocks()) {\n    console.log(\"[Livepage] Preloading Monaco Editor for WASM blocks...\");\n    preloadMonaco();\n  }\n\n  // Create and initialize client\n  const client = new LivepageClient({\n    wsUrl,\n    debug,\n    persistence: true,\n    onConnect: () => console.log(\"[Livepage] Connected\"),\n    onDisconnect: () => console.log(\"[Livepage] Disconnected\"),\n    onError: (error: Error) => console.error(\"[Livepage] Error:\", error),\n  });\n\n  // Discover blocks\n  client.discoverBlocks();\n\n  // Connect to server (for interactive blocks)\n  const hasInteractiveBlocks = client.getBlockIds().some((id: string) => {\n    const block = client.getBlock(id);\n    return block?.type === \"interactive\" || block?.type === \"lvt\";\n  });\n\n  if (hasInteractiveBlocks) {\n    client.connect();\n  }\n\n  // Expose client globally for debugging\n  (window as any).livepageClient = client;\n\n  // Initialize tutorial navigation (if H2 headings exist)\n  const nav = new TutorialNavigation();\n  (window as any).livepageNavigation = nav;\n\n  // Initialize page TOC (for site-mode pages with H2 sections)\n  const pageTOC = new PageTOC();\n  (window as any).livepagePageTOC = pageTOC;\n\n  // Initialize site search (if in site mode)\n  const search = new SiteSearch();\n  (window as any).livepageSearch = search;\n\n  // Initialize code copy buttons\n  const codeCopy = new CodeCopy();\n  (window as any).livepageCodeCopy = codeCopy;\n\n  console.log(`[Livepage] Initialized with ${client.getBlockIds().length} blocks`);\n}\n\n/**\n * Initialize Livepage client automatically when script loads\n */\nif (typeof window !== \"undefined\") {\n  // Auto-initialize on DOMContentLoaded\n  if (document.readyState === \"loading\") {\n    document.addEventListener(\"DOMContentLoaded\", initializeLivepage);\n  } else {\n    initializeLivepage();\n  }\n}\n"],
  "mappings": "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",
  "names": ["browser_exports", "__export", "BaseBlock", "InteractiveBlock", "LivepageClient", "MessageRouter", "MonacoEditor", "OutputPanel", "PersistenceManager", "RunButton", "ServerBlock", "TinyGoExecutor", "WasmBlock", "hasEditableBlocks", "initializeWasm", "isMonacoLoaded", "loadMonaco", "preloadMonaco", "MessageRouter", "debug", "blockID", "handler", "message", "envelope", "action", "data", "error", "filePath", "existing", "notification", "style", "PersistenceManager", "storageKey", "enabled", "debug", "test", "blockID", "code", "data", "error", "raw", "BaseBlock", "config", "persistence", "debug", "code", "persisted", "wrapper", "args", "ServerBlock", "BaseBlock", "config", "persistence", "debug", "action", "data", "InteractiveBlock", "BaseBlock", "config", "persistence", "debug", "action", "data", "sender", "tree", "error", "e", "target", "formData", "value", "key", "MONACO_VERSION", "MONACO_CDN_BASE", "monacoInstance", "loadingPromise", "loadMonacoLoader", "resolve", "reject", "script", "initializeMonacoEnvironment", "_moduleId", "label", "workerMain", "loadMonaco", "startTime", "amdRequire", "monacoModule", "loadTime", "error", "isMonacoLoaded", "preloadMonaco", "hasEditableBlocks", "MonacoEditor", "container", "initialCode", "options", "loadingDiv", "loadMonaco", "error", "code", "callback", "readonly", "OutputPanel", "container", "maxLines", "autoScroll", "panel", "clearBtn", "type", "text", "line", "content", "lineElement", "RunButton", "container", "label", "button", "callback", "error", "running", "TinyGoExecutor", "serverUrl", "debug", "code", "response", "error", "wasmBuffer", "stdout", "stderr", "go", "originalLog", "originalError", "args", "result", "errorMsg", "initializeWasm", "script", "resolve", "reject", "WasmBlock", "BaseBlock", "config", "persistence", "debug", "action", "data", "MonacoEditor", "code", "buttonContainer", "RunButton", "resetButton", "OutputPanel", "TinyGoExecutor", "result", "error", "errorMsg", "LivepageClient", "options", "MessageRouter", "PersistenceManager", "error", "event", "data", "blockID", "action", "message", "codeBlocks", "element", "metadata", "initialCode", "config", "id", "type", "language", "readonly", "editable", "stateRef", "codeElement", "block", "ServerBlock", "InteractiveBlock", "WasmBlock", "TutorialNavigation", "heading", "index", "id", "text", "step", "i", "stepEl", "e", "prevBtn", "nextBtn", "observer", "entries", "entry", "stepIndex", "hash", "s", "updateHash", "scroll", "el", "currentStepEl", "SiteSearch", "response", "error", "sidebar", "header", "searchButton", "query", "results", "lowerQuery", "entry", "lowerTitle", "lowerContent", "titleMatches", "contentMatches", "score", "a", "b", "result", "index", "el", "text", "regex", "content", "maxLength", "str", "selected", "CodeCopy", "_CodeCopy", "codeElement", "pre", "wrapper", "button", "e", "code", "err", "text", "textarea", "PageTOC", "heading", "index", "id", "text", "siteNav", "currentPageLink", "currentPageItem", "subNav", "section", "i", "itemEl", "e", "div", "observer", "entries", "entry", "sectionIndex", "el", "initializeLivepage", "wsUrl", "debug", "hasEditableBlocks", "preloadMonaco", "client", "LivepageClient", "error", "id", "block", "nav", "TutorialNavigation", "pageTOC", "PageTOC", "search", "SiteSearch", "codeCopy", "CodeCopy"]
}
